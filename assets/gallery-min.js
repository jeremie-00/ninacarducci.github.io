class Modal{constructor(t){this.modal=t,this.modalImage=this.modal.querySelector(".modal__img"),this.prevButton=this.modal.querySelector(".nav__prev"),this.nextButton=this.modal.querySelector(".nav__next"),document.addEventListener("click",(t=>{t.target===this.modal&&this.closeModal()})),this.prevButton.addEventListener("click",(()=>this.showPreviousImage())),this.nextButton.addEventListener("click",(()=>this.showNextImage())),this.currentImageIndex=0,this.images=[]}openModal(t,e){this.images=t,this.currentImageIndex=e,this.updateModalImage(),this.modal.showModal(),this.modal.classList.add("dialog__animate__slide__down"),this.modal.classList.remove("dialog__animate__slide__up")}closeModal(){this.modal.classList.remove("dialog__animate__slide__down"),this.modal.classList.add("dialog__animate__slide__up");const t=()=>{this.modal.removeEventListener("animationend",t),this.modal.close()};this.modal.addEventListener("animationend",t)}showPreviousImage(){0!==this.images.length&&(this.currentImageIndex=this.currentImageIndex>0?this.currentImageIndex-1:this.images.length-1,this.updateModalImage())}showNextImage(){0!==this.images.length&&(this.currentImageIndex=this.currentImageIndex<this.images.length-1?this.currentImageIndex+1:0,this.updateModalImage())}updateModalImage(){let t=this.images[this.currentImageIndex].src;t=t.replace(".webp",".jpg"),this.modalImage.src=t}}class Gallery{constructor(t,e={}){this.gallery=t,this.options=Object.assign({modal:!1},e),this.buttons=document.querySelectorAll(".nav__link"),this.galleryContainer=document.querySelector(".gallery__container");const i=Array.from(this.galleryContainer.children);this.boxItems=i.map((t=>{let e=this.createDivWithClass("gallery__box__item");return e.appendChild(t),e})),this.boxItems.forEach((t=>this.galleryContainer.appendChild(t))),this.images=this.gallery.querySelectorAll(".gallery__item"),this.animate=!0,this.filteredTag="all",this.options.modal&&(this.modal=new Modal(document.getElementById("galleryModal"))),this.setupFilterButtons(),this.setDefaultFilter(),this.setupEventListeners()}setupEventListeners(){window.addEventListener("resize",this.handleResizeOrLoad.bind(this)),window.addEventListener("load",this.handleResizeOrLoad.bind(this)),this.options.modal&&this.images.forEach(((t,e)=>{t.addEventListener("click",(()=>this.openModalOnClick(t)))}))}handleResizeOrLoad(){this.animate=!1,this.filterImages(this.filteredTag)}openModalOnClick(t){const e=Array.from(this.images).filter((t=>"none"!==t.closest(".gallery__box__item").style.display)),i=e.indexOf(t);this.modal.openModal(e,i)}setupFilterButtons(){this.buttons.forEach((t=>{t.addEventListener("click",(()=>{this.animate=!0,this.activateButton(t);const e=t.getAttribute("data-filter");this.filterImages(e)}))}))}setDefaultFilter(){const t=document.querySelector('.nav__link[data-filter="all"]');this.activateButton(t),this.filterImages("all")}activateButton(t){this.buttons.forEach((t=>t.classList.remove("active"))),t.classList.add("active")}filterImages(t){this.filteredTag=t,this.animate&&this.boxItems.forEach((t=>t.style.display="none")),this.images.forEach((t=>{const e=t.getAttribute("data-gallery-tag"),i=t.closest(".gallery__box__item");setTimeout((()=>{if("all"===this.filteredTag||this.filteredTag===e){i.style.display="",i.style.opacity="0";const{targetWidth:t,targetHeight:e}=this.getTargetDimensions();this.animate?requestAnimationFrame((()=>{this.animateElement(i,t,e,300)})):(i.style.width=`${t}%`,i.style.height=`${e}%`,i.style.opacity="1")}}),50)}))}getTargetDimensions(){const t=window.innerWidth;return t>=992||t>=768?{targetWidth:33.33333333,targetHeight:33.33333333}:t>=576?{targetWidth:50,targetHeight:50}:{targetWidth:100,targetHeight:100}}animateElement(t,e,i,a){let s=null;const l=n=>{s||(s=n);const o=n-s,r=Math.min(o/a,1);t.style.width=0+(e-0)*r+"%",t.style.height=0+(i-0)*r+"%",t.style.opacity=r,r<1&&requestAnimationFrame(l)};requestAnimationFrame(l)}createDivWithClass(t){let e=document.createElement("div");return e.setAttribute("class",t),e}}document.addEventListener("DOMContentLoaded",(function(){new Gallery(document.getElementById("gallery"),{modal:!0})}));